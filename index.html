<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<!-- 添加viewport属性 -->
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>京东webApp</title>
	<!-- 导入样式文件 -->
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/index.css">

</head>
<body>
	<!-- 外部的容器 -->
	<div class="jd_container">
		<!-- header部分 -->
		<div class="container_header">
			<a href="#">京东首页</a>
			<input type="text" placeholder="请输入内容">
			<span></span>
			<p>登录</p>
		</div>
		<!-- banner部分 -->
		<div class="container_banner">
			<ul class="clearfix">
				<li><a href="#"><img src="images/l8.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l1.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l2.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l3.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l4.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l5.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l6.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l7.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l8.jpg" alt=""></a></li>
				<li><a href="#"><img src="images/l1.jpg" alt=""></a></li>
			</ul>
			<ul>
				<li class="current"></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
			</ul>
		</div>
		<!-- nav部分 -->
		<div class="container_nav">
			<ul class="clearfix">
				<li>
					<a href="list.html"><img src="images/nav0.png" alt=""></a>
					<p>分类查询</p>
				</li>
				<li>
					<a href="list.html"><img src="images/nav1.png" alt=""></a>
					<p>分类查询</p>
				</li>
				<li>
					<a href="list.html"><img src="images/nav2.png" alt=""></a>
					<p>分类查询</p>
				</li>
				<li>
					<a href="list.html"><img src="images/nav3.png" alt=""></a>
					<p>分类查询</p>
				</li>
				<li>
					<a href="list.html"><img src="images/nav4.png" alt=""></a>
					<p>分类查询</p>
				</li>
				<li>
					<a href="list.html"><img src="images/nav5.png" alt=""></a>
					<p>分类查询</p>
				</li>
				<li>
					<a href="list.html"><img src="images/nav6.png" alt=""></a>
					<p>分类查询</p>
				</li>
				<li>
					<a href="list.html"><img src="images/nav0.png" alt=""></a>
					<p>分类查询</p>
				</li>
			</ul>
		</div>
		<!-- main部分 -->
		<div class="container_main">
			<div class="main_content">
				<div class="content_top">
					<span></span>
					<p>掌上秒杀</p>
					<ul>
						<li>0</li>
						<li>3</li>
						<li>:</li>
						<li>0</li>
						<li>0</li>
						<li>:</li>
						<li>0</li>
						<li>0</li>
					</ul>
					<a href="#">更多&gt;</a>
				</div>
				<div class="content_bot">
					<ul class="clearfix">
						<li>
							<a href="#"><img src="images/detail01.jpg" alt=""></a>
							<p>￥10.00</p>
							<p>￥100.00</p>
						</li>
						<li>
							<a href="#"><img src="images/detail02.jpg" alt=""></a>
							<p>￥10.00</p>
							<p>￥100.00</p>
						<li>
							<a href="#"><img src="images/detail01.jpg" alt=""></a>
							<p>￥10.00</p>
							<p>￥100.00</p>
						</li>
						
					</ul>
				</div>
			</div>
			<div class="main_content">
				<div class="content_top">
					<p>京东超市</p>
				</div>
				<div class="content_bot">
					<ul class="clearfix">
						<li class="b_r"><a href="#"><img src="images/cp1.jpg" alt=""></a></li>
						<li><a href="#"><img src="images/cp2.jpg" alt=""></a></li>
						<li class="b_t"><a href="#"><img src="images/cp3.jpg" alt=""></a></li>
					</ul>
				</div>
			</div>
			<div class="main_content">
				<div class="content_top">
					<p>京东超市</p>
				</div>
				<div class="content_bot">
					<ul class="clearfix">
						<li><a href="#"><img src="images/cp4.jpg" alt=""></a></li>
						<li><a href="#"><img src="images/cp5.jpg" alt=""></a></li>
						<li ><a href="#"><img src="images/cp6.jpg" alt=""></a></li>
					</ul>
				</div>
			</div>
			<div class="main_content">
				<div class="content_top">
					<p>京东超市</p>
				</div>
				<div class="content_bot">
					<ul class="clearfix">
						<li class="b_l"><a href="#"><img src="images/cp1.jpg" alt=""></a></li>
						<li><a href="#"><img src="images/cp2.jpg" alt=""></a></li>
						<li class="b_t"><a href="#"><img src="images/cp3.jpg" alt=""></a></li>
					</ul>
				</div>
			</div>
		</div>

	</div>
	
	<!-- 导入js文件 -->
	<!-- <script src="js/index.js"></script> -->
	<!-- 导入zepto核心模块 -->
	<script src="zepto-master/src/zepto.js"></script>
	<script src="zepto-master/src/event.js"></script>
	<!-- 导入touch模块 -->
	<script src="zepto-master/src/touch.js"></script>
	<!-- 导入动画模块 -->
	<script src="zepto-master/src/fx.js"></script>
	<script>
		
		// 入口
		$(function(){

			// 轮播图
			imgSlide();

			// 头部透明度变化
			headerScroll();

			// 倒计时
			timeCount();


		});

		// 轮播图的实现
		var imgSlide = function(){
			// 获取屏幕的宽度
			var moveWidth = $('body').width();
			// 定义li索引(li前后各加一张图片用来实现无缝滑动，所以索引从1开始)
			var index = 1;
			// 定义定时器
			var timer = null;
			// 实现轮播图的功能
			// 左滑移动ul
			$('.container_banner ul:first-child').swipeLeft(function(){

				// 清除定时器
				clearInterval(timer);
				index++;
				// 移动ul,使用动画实现
				$(this).animate({transform:'translateX('+(index*moveWidth*-1)+'px)'},1000,function(){

					// 回调函数
					// console.log('我过渡完了');
					// 判断index是否越界
					if(index>8){
						index = 1;
						// 将ul瞬间移动过去
						$(this).css('transform','translateX('+(index*moveWidth*-1)+'px)');
					}

					// 移动下面小点的位置
					$('.container_banner ul:last-child li').removeClass('current').eq(index-1).addClass('current');

					// 开启定时器
					timer = setInterval(function(){

				//向左滑动图片
				
					index++;
					
					// 移动ul,使用动画实现
					$('.container_banner ul:first-child').animate({transform:'translateX('+(index*moveWidth*-1)+'px)'},1000,function(){

					// 回调函数
					// console.log('我过渡完了');
					// 判断index是否越界
					if(index>8){
						index = 1;
						// 将ul瞬间移动过去
						$('.container_banner ul:first-child').css('transform','translateX('+(index*moveWidth*-1)+'px)');
					}

					// 移动下面小点的位置
					$('.container_banner ul:last-child li').removeClass('current').eq(index-1).addClass('current');

					});
					},3000);

				});
				// console.log(index);
			});
			// 右滑移动ul
			$('.container_banner ul:first-child').swipeRight(function(){

				// 清除定时器
				clearInterval(timer);

				index--;
				// 移动ul,使用动画实现
				$(this).animate({transform:'translateX('+(index*moveWidth*-1)+'px)'},1000,function(){

					// 回调函数
					// console.log('我过渡完了');
					// 判断index是否越界
					if(index<1){
						index = 8;
						// 将ul瞬间移动过去
						$(this).css('transform','translateX('+(index*moveWidth*-1)+'px)');
					}

					// 移动下面小点的位置
					$('.container_banner ul:last-child li').removeClass('current').eq(index-1).addClass('current');

					// 开启定时器
					timer = setInterval(function(){

				//向左滑动图片
				
					index++;
					
					// 移动ul,使用动画实现
					$('.container_banner ul:first-child').animate({transform:'translateX('+(index*moveWidth*-1)+'px)'},1000,function(){

					// 回调函数
					// console.log('我过渡完了');
					// 判断index是否越界
					if(index>8){
						index = 1;
						// 将ul瞬间移动过去
						$('.container_banner ul:first-child').css('transform','translateX('+(index*moveWidth*-1)+'px)');
					}

					// 移动下面小点的位置
					$('.container_banner ul:last-child li').removeClass('current').eq(index-1).addClass('current');

					});
					},3000);
				});
				// console.log(index);
			});

			// 自动轮播
			timer = setInterval(function(){

				//向左滑动图片
				
					index++;
					
					// 移动ul,使用动画实现
					$('.container_banner ul:first-child').animate({transform:'translateX('+(index*moveWidth*-1)+'px)'},1000,function(){

					// 回调函数
					// console.log('我过渡完了');
					// 判断index是否越界
					if(index>8){
						index = 1;
						// 将ul瞬间移动过去
						$('.container_banner ul:first-child').css('transform','translateX('+(index*moveWidth*-1)+'px)');
					}

					// 移动下面小点的位置
					$('.container_banner ul:last-child li').removeClass('current').eq(index-1).addClass('current');

					});
			},3000);
		}

		// 实现头部透明度变化
		var headerScroll = function(){

			var navHeight = $('.container_nav').height();

			var navTop = $('.container_nav').position().top;
			// 导航栏到顶部的距离
			var navToTop = navHeight + navTop;

			// 给window绑定滚动事件
			$(window).scroll(function(){

				// 获取滚动条距离顶部的位置
				var scrollHeight = $(window).scrollTop();
				// console.log(scrollHeight);
				// 求出两者的比例赋值给透明度
				var percent = scrollHeight/navToTop;

				// 判断percent的值，超过了1就没有意义了
				if(percent > 1){
					percent = 1;
				}

				// 将percent赋值给header的透明度
				$('.container_header').css('backgroundColor','rgba(201, 21, 35,'+percent+')');

			});


		}

		// 倒计时
		var timeCount = function(){

			var totalTime = 3;
			var totalSecond = 3*60*60;

			// 设置定时器,1000ms执行一次
			setInterval(function(){
				//总秒数自减
				totalSecond--;

				if(totalSecond<0){
					totalSecond = 3*60*60;
				}

				// 将更新后的秒数换算成对应的时分秒
				var h = parseInt(totalSecond/3600);
				var m = parseInt(totalSecond%3600/60);
				var s = parseInt(totalSecond%60);

				// 将对应的li标签中内容改成对应的数值
				$('.main_content:first-child .content_top ul li:nth-child(1)').html(parseInt(h/10));
				$('.main_content:first-child .content_top ul li:nth-child(2)').html(parseInt(h%10));
				$('.main_content:first-child .content_top ul li:nth-child(4)').html(parseInt(m/10));
				$('.main_content:first-child .content_top ul li:nth-child(5)').html(parseInt(m%10));
				$('.main_content:first-child .content_top ul li:nth-child(7)').html(parseInt(s/10));
				$('.main_content:first-child .content_top ul li:nth-child(8)').html(parseInt(s%10));




			},1000);

		}
	</script>
</body>
</html>